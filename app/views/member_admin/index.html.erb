<h1> <%= t_scoped :title %></h1>

<div class="new_member_admin_buttons">
  <%= link_to t_scoped(:new_member),
    new_member_admin_path,
    method: :get,
    class: 'btn btn-primary'
  %>
</div>

<div class="container">
  <%= form_with model: Member,
        url: member_search_path,
        method: :post,
        id: 'member_search_form' do |form| %>

  <div class="form-text">
    <%= form.label :search, t_scoped(:search)  %>
    <%= form.text_field :search, class: 'form-control' %>
  </div>

<% end %>

<div id="search-result"></div>
<table class="table mt-3 mb-3 hidden" id='search-result-table'>
        <thead>
          <th scope='col'> <%= t_scoped :member_number %></th>
          <th scope='col'> <%= t_scoped :email %></th>
          <th scope='col'> <%= t_scoped :name %></th>
          <th scope='col'> <%= t_scoped :surnames %></th>
        </thead>
        <tbody id='search-result-body'>
        </tbody>
      </table>
</div>

<div class="container">
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item"
        role="presentation"
    >
    <button class="nav-link active"
            data-bs-toggle="tab"
            data-bs-target="#members-table"
            type="button"
            aria-controls="<%= t_scoped :members %>"
            aria-selected="true"
            >
        <%= t_scoped :members %>
      </button>
    </li>
    <li class="nav-item"
        role="presentation"
    >
    <button class="nav-link"
            data-bs-toggle="tab"
            data-bs-target="#non-members-table"
            type="button"
            aria-controls="<%= t_scoped :not_members %>"
            aria-selected="false"
            >
        <%= t_scoped :not_members %>
      </button>
    </li>
  </ul>
  <div class="tab-content">
    <div class="tab-pane fade show active" id="members-table" aria-labelledby="">
      <h2> <%= t_scoped :members %></h2>

      <table class="table" id="member-table">
        <thead>
          <th scope='col'> <%= t_scoped :member_number %></th>
          <th scope='col'> <%= t_scoped :email %></th>
          <th scope='col'> <%= t_scoped :name %></th>
          <th scope='col'> <%= t_scoped :surnames %></th>
        </thead>
        <tbody class='admin_members_table_body'>
          <% @members.each_with_index do |member, idx| %>
            <tr class='admin_members_table_row' id=<%= idx %>>
              <th scope="row">
                <%= link_to member.member_number, member_admin_path(member.id) %>
              </th>
              <td> <%= member.email %></td>
              <td> <%= member.name %></td>
              <td> <%= member.surname1 + ' ' + member.surname2 %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <nav class='member_navigation' aria-label='Member navigation'>
        <ul class="pagination">
        </ul>
      </nav>
    </div>
    <div class="tab-pane fade" id="non-members-table" aria-labelledby="">
      <h2> <%= t_scoped :not_members %></h2>

      <table class="table" id="not-member-table">
        <thead>
          <th scope='col'> <%= t_scoped :email %></th>
          <th scope='col'> <%= t_scoped :name %></th>
          <th scope='col'> <%= t_scoped :surnames %></th>
        </thead>
        <tbody class='admin_members_table_body'>
          <% @not_members.each_with_index do |user, idx| %>
            <tr class='admin_not_members_table_row' id=<%= idx %>>
              <th scope="row"> <%= link_to user.email, member_admin_path(user.id) %></th>
              <td> <%= user.name %></td>
              <td> <%= user.surname1 + ' ' + user.surname2 %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>

